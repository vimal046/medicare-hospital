<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}"></head>
<body>
	<nav th:replace="~{fragments/header :: navbar}"></nav>

	<div class="container py-4">
		<div class="d-flex align-items-center mb-4">
			<a th:href="@{/patient/dashboard}"
				class="btn btn-outline-secondary me-3"> <i
				class="fas fa-arrow-left"></i>
			</a>
			<h2 class="page-title mb-0">
				<i class="fas fa-calendar-plus"></i> Book New Appointment
			</h2>
		</div>

		<div class="row justify-content-center">
			<div class="col-lg-10">
				<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

				<div class="card shadow-lg">
					<div class="card-header">
						<h5 class="mb-0">
							<i class="fas fa-clipboard-list"></i> Appointment Details
						</h5>
					</div>
					<div class="card-body p-4">
						<form th:action="@{/patient/appointments/book}"
							th:object="${appointment}" method="post">
							<div class="row g-4 mb-4">
								<div class="col-md-6">
									<label class="form-label">Select Department *</label> <select
										class="form-select form-select-lg" name="departmentId"
										id="departmentSelect" required>
										<option value="">Choose Department</option>
										<option th:each="dept : ${departments}" th:value="${dept.id}"
											th:text="${dept.name}">Cardiology</option>
									</select> <small class="text-secondary">Select the medical
										department you need</small>
								</div>

								<div class="col-md-6">
									<label class="form-label">Select Doctor *</label> <select
										class="form-select form-select-lg" th:field="*{doctorId}"
										required>
										<option value="">Choose Doctor</option>
										<option th:each="doctor : ${doctors}" th:value="${doctor.id}"
											th:text="${doctor.fullName} + ' (' + ${doctor.specialization} + ')'">
											Dr. Smith - Cardiology</option>
									</select> <small class="text-secondary">Choose your preferred
										doctor</small>
								</div>
							</div>

							<div class="row g-4 mb-4">
								<div class="col-md-6">
									<label class="form-label">Appointment Date *</label> <input
										type="date" class="form-control form-control-lg"
										th:field="*{appointmentDate}"
										th:min="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}"
										required> <small class="text-secondary">Select
										a future date</small>
								</div>

								<div class="col-md-6">
									<label class="form-label">Appointment Time *</label> <input
										type="time" class="form-control form-control-lg"
										th:field="*{appointmentTime}" required> <small
										class="text-secondary">Preferred time slot</small>
								</div>
							</div>

							<div class="mb-4">
								<label class="form-label">Symptoms / Reason for Visit *</label>
								<textarea class="form-control" th:field="*{symptoms}" rows="5"
									placeholder="Please describe your symptoms or reason for consultation in detail. This helps the doctor prepare for your visit."
									required></textarea>
							</div>

							<div class="alert alert-info">
								<i class="fas fa-info-circle"></i> <strong>Please Note:</strong>
								Your appointment will be confirmed. Make sure to arrive 10
								minutes before your scheduled time.
							</div>

							<div class="d-flex gap-3">
								<button type="submit" class="btn btn-primary btn-lg">
									<i class="fas fa-calendar-check"></i> Book Appointment
								</button>
								<a th:href="@{/patient/dashboard}"
									class="btn btn-secondary btn-lg"> <i class="fas fa-times"></i>
									Cancel
								</a>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div th:replace="~{fragments/header :: scripts}"></div>
</body>
</html>